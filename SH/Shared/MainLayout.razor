@using System.Reflection
@using SH.Shared
@inherits LayoutComponentBase


<MudRTLProvider RightToLeft="true">
    <MudThemeProvider Theme="@MyCustomTheme" />
    @* <MudThemeProvider /> *@
    <MudDialogProvider />
    <MudSnackbarProvider />

    <MudLayout>

        <MudInputLabel>

            <MudAppBar Elevation="0" Dense="true">
                <AuthorizeView>

                    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer" />
                    <ProfileMenu Open="@ProfileMenuOpen"></ProfileMenu>
                    <MudSpacer />
                    <div Class="px-14">
                        <MudIconButton OnClick="@ProfileClick" Icon="@Icons.Material.Filled.Person" Color="Color.Inherit" Target="_blank" />
                    </div>

                </AuthorizeView>


            </MudAppBar>

            <AuthorizeView>
                <NavMenu Version="@_version" OpenMenu="@_openManu" />

            </AuthorizeView>

            <MudMainContent Class="pt-10 p-0">

                @* <MudContainer Class="mt-6"> *@


                    @Body


                @* </MudContainer> *@
            </MudMainContent>
        </MudInputLabel>
    </MudLayout>
</MudRTLProvider>
@code
{
    public bool ProfileMenuOpen { get; set; }
    private NavMenu? NavMenu { get; set; }
    bool _openManu = true;
    // readonly Assembly _assembly = typeof(Program).Assembly;
    string? _version = "";
    MudTheme MyCustomTheme = new MudTheme()
        {
            Typography = new Typography()
            {
                Default = new Default()
                {
                    FontFamily = new[] { "dana" },
                    FontSize = ".875rem",
                    // FontSize = ".10px",


                },
                Body1 = new Body1()
                {
                    FontFamily = new[] { "dana" },
                    FontSize = ".875rem",
                    FontWeight = 500
                },
                Body2 = new Body2()
                {
                    FontFamily = new[] { "dana" },
                    FontSize = ".865rem",
                    FontWeight = 500
                }
            }

        };


    protected override void OnInitialized()
    {
        base.OnInitialized();
        // _version = _assembly.GetName().Version?.ToString();
    }

    void ToggleDrawer()
    {
        _openManu = !_openManu;
        NavMenu?.ToggleDrawer();
    }

    void ProfileClick()
    {
        ProfileMenuOpen = !ProfileMenuOpen;
    }



}

